<?php
// app/lib/Occasions.php - نسخه نهایی کامل

class Occasions {
    
    /**
     * لیست مناسبت‌های مهم سال ۱۴۰۴
     */
    private static function getOccasionsList() {
        return [
            // فروردین
            '01-01' => ['name' => 'جشن نوروز', 'message' => "مشتری گرامی {client_name}،\nفرارسیدن نوروز باستانی را تبریک گفته و سالی سرشار از موفقیت برایتان آرزومندیم.\n- رایان تکرو"],
            '01-11' => ['name' => 'عید سعید فطر', 'message' => "حلول ماه شوال و عید سعید فطر، جشن بندگی خالصانه، بر شما مبارک باد.\n- رایان تکرو"],
            '01-12' => ['name' => 'روز جمهوری اسلامی', 'message' => ""],
            '01-13' => ['name' => 'روز طبیعت', 'message' => "روز طبیعت، فرصتی برای آشتی با زمین.\nروزتان خوش.\n- رایان تکرو"],

            // اردیبهشت
            '02-25' => ['name' => 'روز بزرگداشت فردوسی', 'message' => "روز بزرگداشت حکیم ابوالقاسم فردوسی، پاسدار زبان پارسی، گرامی باد.\n- رایان تکرو"],

            // خرداد
            '03-14' => ['name' => 'رحلت امام خمینی (ره)', 'message' => ""],
            '03-15' => ['name' => 'قیام ۱۵ خرداد', 'message' => ""],
            '03-16' => ['name' => 'عید سعید قربان', 'message' => "فرا رسیدن عید قربان، جشن شکوهمند ایثار و بندگی را به شما تبریک عرض می‌نماییم.\n- رایان تکرو"],
            '03-24' => ['name' => 'عید سعید غدیر خم', 'message' => "عید کمال دین، سالروز اتمام نعمت و هنگامه اعلان وصایت و ولایت امیرالمومنین (ع) بر شما مبارک باد.\n- رایان تکرو"],

            // تیر
            '04-13' => ['name' => 'تاسوعای حسینی', 'message' => "فرا رسیدن تاسوعای حسینی، روز یقین و وفاداری، بر شما تسلیت باد.\n- رایان تکرو"],
            '04-14' => ['name' => 'عاشورای حسینی', 'message' => "فرا رسیدن عاشورای حسینی، سالروز شهادت سرور و سالار شهیدان، بر شما تسلیت باد.\n- رایان تکرو"],

            // شهریور
            '06-04' => ['name' => 'روز کارمند', 'message' => "روز کارمند بر تمامی کارمندان پرتلاش ایران زمین مبارک باد.\n- رایان تکرو"],

            // مهر
            '07-20' => ['name' => 'روز بزرگداشت حافظ', 'message' => "روز بزرگداشت لسان‌الغیب، حافظ شیرازی، گرامی باد.\n- رایان تکرو"],

            // آذر
            '09-30' => ['name' => 'جشن شب یلدا', 'message' => "یلدا، مجالی است برای تکرار هر آنچه روزگاری، سرمشق خوبی‌هایمان بوده است.\nیلدایتان مبارک.\n- رایان تکرو"],

            // بهمن
            '11-22' => ['name' => 'پیروزی انقلاب اسلامی', 'message' => ""],

            // اسفند
            '12-05' => ['name' => 'روز مهندس', 'message' => "روز مهندس بر تمامی مهندسان خلاق و کارآفرین ایران زمین مبارک باد.\n- رایان تکرو"],
            '12-29' => ['name' => 'روز ملی شدن صنعت نفت', 'message' => ""],
        ];
    }

    /**
     * ✅ متد جدید برای دریافت تمام مناسبت‌ها
     * @return array
     */
    public static function getAllOccasions() {
        return self::getOccasionsList();
    }

    /**
     * مناسبت امروز را برمی‌گرداند.
     * @return array|null
     */
    public static function getTodaysOccasion() {
        $todayKey = jdate('m-d');
        $occasions = self::getOccasionsList();
        
        if (isset($occasions[$todayKey]) && !empty($occasions[$todayKey]['message'])) {
            return $occasions[$todayKey];
        }
        
        return null;
    }
}